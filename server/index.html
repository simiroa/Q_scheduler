<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Scheduler</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/overlays.css">
    <link rel="stylesheet" href="styles/memo.css">
    <link rel="stylesheet" href="styles/settings.css">
    <link rel="icon" href="https://fav.farm/ğŸ“…" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=12">
    <style>
        .version-tag {
            font-size: 10px;
            background: #5e6ad2;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 8px;
            vertical-align: middle;
            font-weight: normal;
            opacity: 0.8;
        }
    </style>
</head>

<body style="user-select: none !important; -webkit-user-select: none !important;">
    <div class="app-container">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <div class="brand">
                Quantum <span>Scheduler</span>
                <span class="version-tag">v8.27</span>
                <span id="connectionDot" class="conn-dot" title="ì—°ê²° í™•ì¸ ì¤‘..."></span>
            </div>
            <div class="task-list-header">
                <span>PROJECTS</span>
            </div>

            <div class="sidebar-scroll-area" id="sidebarScrollArea">
                <div class="task-list" id="sidebarList"></div>
                <button class="add-task-btn" id="addProjectBtn">
                    <span class="material-icons" style="font-size: 18px;">add</span> Add Project
                </button>
            </div>
            <div class="sidebar-footer">
                <div class="list-management">
                    <div class="list-head">
                        <span class="panel-title">ARCHIVE</span>
                        <span class="status-dot" id="statusDot" title="ì €ì¥ ìƒíƒœ"></span>
                    </div>
                    <div class="list-row">
                        <div class="list-select">
                            <span class="material-icons">folder</span>
                            <select id="projectSelect" class="project-dropdown">
                                <option value="">-- ì„ íƒí•˜ì„¸ìš” --</option>
                            </select>
                        </div>
                        <button class="icon-btn" id="settingsBtn" title="ì„¤ì •">
                            <span class="material-icons">settings</span>
                        </button>
                    </div>
                    <div class="list-actions">
                        <div class="action-group">
                            <button id="newBtn" class="icon-btn" title="ì•„ì¹´ì´ë¸Œ ì¶”ê°€">
                                <span class="material-icons">add_box</span>
                            </button>
                            <button id="renameProjectBtn" class="icon-btn" title="ì´ë¦„ ë³€ê²½">
                                <span class="material-icons">edit</span>
                            </button>
                            <button id="deleteProjectBtn" class="icon-btn danger" title="ì‚­ì œ">
                                <span class="material-icons">delete_outline</span>
                            </button>
                            <button id="lockProjectBtn" class="icon-btn" title="ì ê¸ˆ ì„¤ì •">
                                <span class="material-icons">lock_open</span>
                            </button>
                        </div>
                        <div class="action-group action-group--secondary">
                            <button id="undoBtn" class="icon-btn" title="Undo">
                                <span class="material-icons">undo</span>
                            </button>
                            <button id="redoBtn" class="icon-btn" title="Redo">
                                <span class="material-icons">redo</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </aside>


        <!-- Main Content -->
        <main class="timeline-main">
            <!-- Header -->
            <header class="timeline-header-container" id="timelineHeader">
                <div class="timeline-header-scroll" id="headerScrollContent"></div>
            </header>
            <div class="timeline-subheader-spacer"></div>

            <!-- Timeline Body -->
            <div class="timeline-body" id="timelineBody">
                <div class="timeline-grid" id="timelineGrid">
                    <div class="grid-lines" id="gridLines"></div>
                    <div class="timeline-rows" id="timelineRows"></div>
                    <div class="now-marker" id="nowMarker"></div>
                </div>
                <div class="task-layer" id="taskLayer"></div>
                <div class="event-layer" id="eventLayer"></div>
                <div class="snap-guide-line" id="snapGuideLine"></div>
                <!-- Selection Box -->
                <div id="selectionBox" class="selection-box"></div>
            </div>
        </main>
    </div>

    <!-- Right Side Memo Panel -->
    <aside class="memo-panel" id="memoPanel">
        <div class="memo-panel-header">
            <span class="memo-title"><span class="material-icons"
                    style="font-size: 18px; vertical-align: middle; margin-right: 4px;">description</span>ë©”ëª¨</span>
            <button class="memo-close-btn" id="memoPanelClose"><span class="material-icons">close</span></button>
        </div>
        <div class="memo-panel-info" id="memoPanelInfo">
            <span class="memo-task-name" id="memoTaskName">ì‘ì—… ì„ íƒ</span>
        </div>
        <div class="memo-panel-body">
            <textarea id="memoPanelInput" class="memo-panel-textarea" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
        </div>
        <div class="memo-panel-footer">
            <button class="modal-btn confirm" id="memoPanelSave"><span class="material-icons"
                    style="font-size: 18px; vertical-align: middle; margin-right: 4px;">save</span>ì €ì¥</button>
        </div>
    </aside>

    <!-- Modals -->

    <!-- Edit Modal -->
    <div id="editModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="header-title">
                    <span class="header-icon"><span class="material-icons">event</span></span>
                    <h3>Edit Item</h3>
                </div>
                <button class="close-icon-btn" id="editCloseX"><span class="material-icons">close</span></button>
            </div>

            <div class="modal-body">
                <div class="modal-group">
                    <label>Name</label>
                    <div class="input-wrapper">
                        <input type="text" id="editNameInput" class="modal-input" placeholder="Name">
                        <span class="input-icon"><span class="material-icons"
                                style="font-size: 18px;">edit</span></span>
                    </div>
                </div>

                <div class="modal-group">
                    <label>Schedule</label>
                    <div class="date-row" style="display: flex; gap: 10px; margin-bottom: 8px;">
                        <div class="input-wrapper" style="flex:1">
                            <input type="date" id="editStartDateInput" class="modal-input">
                        </div>
                        <div class="input-wrapper" style="flex:1">
                            <input type="date" id="editEndDateInput" class="modal-input">
                        </div>
                    </div>
                    <div class="duration-display" id="editDurationDisplay">
                        <!-- JS Generated -->
                    </div>
                    <input type="hidden" id="editDurationInput">
                </div>

                <div class="modal-group">
                    <label>Color</label>
                    <div class="color-picker-container">
                        <div class="color-options" id="editColorOptions">
                            <!-- JS Generated -->
                        </div>
                        <button class="add-color-btn" id="editCustomColorBtn" title="Custom Color">+</button>
                        <input type="color" id="editColorInput" class="hidden-color-input">
                    </div>
                </div>

                <div class="modal-group">
                    <label>Memo</label>
                    <div class="input-wrapper">
                        <textarea id="editMemoInput" class="modal-input" placeholder="Add a memo..." rows="3"
                            style="resize: vertical; min-height: 80px;"></textarea>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button id="editCancelBtn" class="modal-btn secondary">Cancel</button>
                <button id="editSaveBtn" class="modal-btn primary"><span class="material-icons"
                        style="font-size: 18px; vertical-align: middle; margin-right: 4px;">save</span>Save
                    Changes</button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div id="confirmModal" class="modal-overlay">
        <div class="modal-content confirm-modal">
            <div class="modal-header">
                <h3 id="confirmTitle">Confirm</h3>
                <button class="close-icon-btn" id="confirmCloseX"><span class="material-icons">close</span></button>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">Are you sure?</p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel" id="confirmCancelBtn">Cancel</button>
                <button class="modal-btn confirm" id="confirmOkBtn">OK</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal-overlay">
        <div class="modal-content settings-modal">
            <div class="modal-header">
                <h3><span class="material-icons" style="vertical-align: middle; margin-right: 6px;">settings</span>ì„¤ì •
                </h3>
                <button class="close-icon-btn" id="settingsCloseX"><span class="material-icons">close</span></button>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="tab-btn active" data-tab="general">ì¼ë°˜</button>
                    <button class="tab-btn" data-tab="data">ë°ì´í„° ê´€ë¦¬</button>
                </div>

                <div class="tab-content active" id="tab-general">
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">ë‹¤í¬ ëª¨ë“œ</span>
                            <span class="setting-desc">ì–´ë‘ìš´ í…Œë§ˆ ì‚¬ìš©</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="settingDarkMode">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">ìœˆë„ìš° ì‹œì‘ ì‹œ ì‹¤í–‰</span>
                            <span class="setting-desc">ì‹œìŠ¤í…œ ë¶€íŒ… ì‹œ ì„œë²„ ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="settingRunOnStartup">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">í˜„ì¬ í™”ë©´ ê³µìœ </span>
                            <span class="setting-desc">íƒ€ì„ë¼ì¸ì„ ì´ë¯¸ì§€ë¡œ ì €ì¥</span>
                        </div>
                        <button class="btn-secondary" id="settingShareScreen">
                            <span class="material-icons">image</span> ì´ë¯¸ì§€ ì €ì¥
                        </button>
                    </div>
                </div>

                <div class="tab-content" id="tab-data">
                    <!-- Backup Section -->
                    <div class="setting-group">
                        <h4>ì•„ì¹´ì´ë¸Œ ë°±ì—… (JSON)</h4>
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-label">ì „ì²´ ë°±ì—… ë°ì´í„°</span>
                                <span class="setting-desc">í”„ë¡œì íŠ¸, ì‘ì—…, ë©”ëª¨ ë“± ëª¨ë“  ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.</span>
                            </div>
                            <div class="button-row">
                                <button class="btn-primary" id="settingExportJson">
                                    <span class="material-icons">download</span> ë‚´ë³´ë‚´ê¸° (.json)
                                </button>
                                <button class="btn-secondary" id="settingImportJson">
                                    <span class="material-icons">upload</span> ê°€ì ¸ì˜¤ê¸°
                                </button>
                                <input type="file" id="settingImportFile" accept=".json" style="display: none;">
                            </div>
                        </div>
                    </div>

                    <!-- External Sync Section -->
                    <div class="setting-group">
                        <h4>ìº˜ë¦°ë” ì—°ë™ ë° ê³µíœ´ì¼</h4>
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-label">Google ìº˜ë¦°ë” ë‚´ë³´ë‚´ê¸°</span>
                                <span class="setting-desc">iCal í˜•ì‹(.ics)ìœ¼ë¡œ ì¼ì •ì„ ë‚´ë³´ëƒ…ë‹ˆë‹¤.</span>
                            </div>
                            <button class="btn-secondary" id="settingExportGoogle">
                                <span class="material-icons">calendar_today</span> ë‚´ë³´ë‚´ê¸° (.ics)
                            </button>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-label">í•œêµ­ ê³µíœ´ì¼ ë¶ˆëŸ¬ì˜¤ê¸°</span>
                                <span class="setting-desc">2024-2030ë…„ ì£¼ìš” ê³µíœ´ì¼ì„ íƒ€ì„ë¼ì¸ì— í‘œì‹œí•©ë‹ˆë‹¤.</span>
                            </div>
                            <button class="btn-secondary" id="settingFetchHolidays">
                                <span class="material-icons">public</span> ê³µíœ´ì¼ ê°€ì ¸ì˜¤ê¸°
                            </button>
                        </div>
                    </div>

                    <!-- Danger Zone Section -->
                    <div class="setting-group danger-zone">
                        <h4>ìœ„í—˜ êµ¬ì—­ (Danger Zone)</h4>
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-label">ëª¨ë“  í”„ë¡œì íŠ¸ ë°ì´í„° ì‚­ì œ</span>
                                <span class="setting-desc">ì„œë²„ì˜ ëª¨ë“  í”„ë¡œì íŠ¸ì™€ ì„¤ì •ì´ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤. ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</span>
                            </div>
                            <button class="btn-danger" id="settingDeleteAll">
                                <span class="material-icons">delete_forever</span> ëª¨ë“  ë°ì´í„° ì‚­ì œ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Menus -->
    <div id="taskContextMenu" class="context-menu">
        <div class="menu-item" id="ctxSetDates">
            <span class="material-icons"
                style="font-size: 16px; margin-right: 8px; color: var(--accent-primary);">event_note</span>ì¼ì • ì„¤ì •
        </div>
        <div class="menu-item" id="ctxMemo">
            <span class="material-icons" style="font-size: 16px; margin-right: 8px;">description</span>ë©”ëª¨
        </div>
        <div class="menu-item" id="ctxAddEvent">
            <span class="material-icons" style="font-size: 16px; margin-right: 8px; color: #ef4444;">turned_in</span>ì´ë²¤íŠ¸
            ì¶”ê°€
        </div>
        <div class="menu-item" id="ctxSplit">
            <span class="material-icons" style="font-size: 16px; margin-right: 8px;">content_cut</span>ë¶„í• 
        </div>
        <div class="menu-item" id="ctxMerge" style="display:none;">
            <span class="material-icons" style="font-size: 16px; margin-right: 8px;">link</span>ë³‘í•©
        </div>
        <div class="menu-item" id="ctxToggleWeekend">
            <span class="material-icons" style="font-size: 16px; margin-right: 8px;">weekend</span>ì£¼ë§ í¬í•¨ í† ê¸€
        </div>
        <div class="menu-separator"></div>
        <div class="menu-item" id="ctxToday">
            <span class="material-icons" style="font-size: 16px; margin-right: 8px;">today</span>Today
        </div>
    </div>

    <div id="sidebarContextMenu" class="context-menu">
        <div class="menu-item" id="ctxAddSubtask">
            <span class="material-icons" style="font-size: 16px; margin-right: 8px;">subdirectory_arrow_right</span>í•˜ìœ„
            ì‘ì—… ì¶”ê°€
        </div>
        <div class="menu-item" id="ctxDeleteRow">
            <span class="material-icons"
                style="font-size: 16px; margin-right: 8px; color: var(--accent-danger);">delete_outline</span>ì‚­ì œ
        </div>
    </div>
    <div id="headerContextMenu" class="context-menu">
        <div class="menu-item" id="ctxToggleHoliday">
            <span class="material-icons" style="font-size: 16px; margin-right: 8px;">flag</span>íœ´ì¼ ì§€ì •
        </div>
        <div class="menu-item" id="ctxHeaderToday">
            <span class="material-icons" style="font-size: 16px; margin-right: 8px;">today</span>Today
        </div>
    </div>
    </div>

    <!-- Hidden Color Inputs -->
    <input type="color" id="colorPicker" style="display:none;">
    <input type="color" id="projectColorPicker" style="display:none;">

    <!-- Context Menu Suppression (Inline) -->
    <!-- Context Menu Suppression (Failsafe) -->
    <script>
        window.addEventListener('contextmenu', (e) => {
            e.preventDefault();
        }, { capture: true });
    </script>

    <script type="module" src="script.js?v=8.28"></script>
</body>

</html>